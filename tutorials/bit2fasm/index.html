<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">

<title>
    
    bit2fasm • Immerse Computing Bootcamp
    
</title>

<!-- Bootstrap core CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

<!-- Custom styles for this template -->
<link rel="stylesheet" href=/ComputingBootCamp/css/main.css>

<link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel="stylesheet">
<!-- <link rel="preconnect" href="https://fonts.gstatic.com"> -->
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;800&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" sizes="25x17" href=/ComputingBootCamp/icon/logo.png>

<script src="https://kit.fontawesome.com/624d595ebf.js" crossorigin="anonymous"></script>

</head>

<body>
  <div class="d-flex" id="wrapper">
    <!-- Sidebar -->
<div class="bg-light border-right" id="sidebar-wrapper">
    <div class="sidebar-sticky">
        <div class="sidebar-heading-big">
            <a href="/ComputingBootCamp/"><img src="/ComputingBootCamp/icon/logo.png" width="50"> <img
                    src="/ComputingBootCamp/icon/sidebar_title.png" width="200">
            </a>
        </div>


        <a href="/ComputingBootCamp/pages/schedule/"
            class="list-group-item list-group-item-action bg-light sidebar-schedule sidebar-item">
            <span class="badge badge-pill badge-dark-grey"></span>
            Schedule
        </a>
        <a href="/ComputingBootCamp/pages/students-2021/"
            class="list-group-item list-group-item-action bg-light sidebar-item">
            <span class="badge badge-pill badge-dark-grey"></span>
            Student List
        </a>

        

        
        <div class="card">

            <div class="sidebar-heading-big btn-link collapsed" data-toggle="collapse"
                data-target="#collapsesetup" aria-expanded=""
                aria-controls="collapsesetup">
                Setup
            </div>

            <div id="collapsesetup" class="collapse">
                <div class="list-group list-group-flush">
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/linux/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Linux Setup & Tutorials
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/setup_website/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Setting Up Your Website
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </div>
            </div>
        </div>
        
        <div class="card">

            <div class="sidebar-heading-big btn-link collapsed" data-toggle="collapse"
                data-target="#collapsedevelopment" aria-expanded=""
                aria-controls="collapsedevelopment">
                Software Development
            </div>

            <div id="collapsedevelopment" class="collapse">
                <div class="list-group list-group-flush">
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/git/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Git
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/github/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        GitHub
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/vscode/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        VS Code
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/make/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Make (and Makefiles)
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/cmake/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        CMake
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/pythonIntro/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Python Intro
                    </a>
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/pythonEnvs/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Python Packages/Environments
                    </a>
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/pythonAdv/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Python Packages II
                    </a>
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/githubci/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Github CI + Unit Testing
                    </a>
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/sphinx/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Documentation + Sphinx
                    </a>
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/docker/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Docker
                    </a>
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/sql/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        SQL Basics
                    </a>
                    
                    
                </div>
            </div>
        </div>
        
        <div class="card">

            <div class="sidebar-heading-big btn-link collapsed" data-toggle="collapse"
                data-target="#collapsefpga_commercial" aria-expanded=""
                aria-controls="collapsefpga_commercial">
                Commerical FPGA
            </div>

            <div id="collapsefpga_commercial" class="collapse">
                <div class="list-group list-group-flush">
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/install_vivado/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Install Vivado/Vitis
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/vivado_tcl/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Vivado Review and Tcl for Vivado
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/vivado/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Vivado Block Design Tutorial
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/vitis/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Vitis: Software
                    </a>
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/vitis_hls/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Vitis: HLS
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/hls_system_integration/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        HLS System Integration
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </div>
            </div>
        </div>
        
        <div class="card">

            <div class="sidebar-heading-big btn-link collapsed" data-toggle="collapse"
                data-target="#collapsefpga_opensource" aria-expanded=""
                aria-controls="collapsefpga_opensource">
                Open FPGA CAD
            </div>

            <div id="collapsefpga_opensource" class="collapse">
                <div class="list-group list-group-flush">
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/rapidwright/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        RapidWright
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/interchange/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Interchange
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/xray/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Project X-Ray
                    </a>
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/fasm/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        FASM (FPGA Assembly)
                    </a>
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/xray_install/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        prjxray Install
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/bit2fasm/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        bit2fasm
                    </a>
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/fasm2bels/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        fasm2bels
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/symbiflow-examples/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        symbiflow-examples
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/vtr/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        VTR
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                </div>
            </div>
        </div>
        
        <div class="card">

            <div class="sidebar-heading-big btn-link collapsed" data-toggle="collapse"
                data-target="#collapserobotics" aria-expanded=""
                aria-controls="collapserobotics">
                Robotics
            </div>

            <div id="collapserobotics" class="collapse">
                <div class="list-group list-group-flush">
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </div>
            </div>
        </div>
        
        <div class="card">

            <div class="sidebar-heading-big btn-link collapsed" data-toggle="collapse"
                data-target="#collapseresources" aria-expanded=""
                aria-controls="collapseresources">
                Resources
            </div>

            <div id="collapseresources" class="collapse">
                <div class="list-group list-group-flush">
                    
                    
                    <a href="/ComputingBootCamp/tutorials/faq/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        FAQ - Misc Ideas
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </div>
            </div>
        </div>
        
        <div class="card">

            <div class="sidebar-heading-big btn-link collapsed" data-toggle="collapse"
                data-target="#collapsearchive" aria-expanded=""
                aria-controls="collapsearchive">
                Archive
            </div>

            <div id="collapsearchive" class="collapse">
                <div class="list-group list-group-flush">
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/vm_setup/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        Virtual Machine Setup
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <a href="/ComputingBootCamp/tutorials/bram-patch/"
                        class="list-group-item list-group-item-action bg-light sidebar-item">
                        <span class="badge badge-pill badge-dark-grey"></span>
                        bram-patch
                    </a>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </div>
            </div>
        </div>
        

        <!-- <div class="sidebar-heading-big"></div>
        <div class="card">
            <div class="sidebar-heading-big btn-link " data-toggle="collapse" data-target="#collapseResources"
                aria-expanded="" aria-controls="collapseResources">
                Resources </div>
            <div id="collapseResources" class="collapse show ">
                <div class="list-group list-group-flush">
                    
                </div>
            </div>
        </div> -->

    </div>
</div>
<!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">

      <nav class="navbar sticky-top navbar-expand-lg title-bar border-bottom d-flex flex-row">
    <div>
        <button class="btn btn-brand" id="menu-toggle">
            <i class="fas fa-bars"></i>
        </button>
    </div>
    <div class="flex-fill">
        <p class="title-text">BYU Computing Boot Camp</p>
    </div>

    <!-- <a href="#" class="navbar-brand mb-0 h1  page-title-bar text-center mx-auto" id="page-title-bar"></a> -->

    
    <div class="p-2">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link btn btn-brand suggest-edits"
                    href="https://github.com/byu-cpe/ComputingBootCamp/issues/new?labels=website&title=Updates to bit2fasm page"><i
                        class="fab fa-github"></i> Suggest
                    Edits</a>
            </li>
        </ul>
    </div>
    
</nav>

      <div class="container">
        <article class="page">
    <h1 class="page-title" id="page-title">
        
        bit2fasm
    </h1>

  <div class="page-content">
    

    <p>This page provides details on how the bit2fasm.py script within Project XRAY works. There are two primary sections of this description. The first, <a href="#code">Code</a>, describes the code in the various files that perform the bit2fasm functionality. The second, <a href="#data-structures">Data Structures</a>, describes the data structures used by the code.</p>

<h2 id="code">Code</h2>

<h3 id="bit2fasmpy">bit2fasm.py</h3>

<p>The <a href="https://github.com/SymbiFlow/prjxray/blob/master/utils/bit2fasm.py">bit2fasm.py</a> python file contains the “main” function for the bit2fasm program. It isn’t a very big file and most of the actual work is done by other files in the ProjectXRAY repository.</p>

<p>To run the executable, the <a href="#project-xray-environment-variables">Project XRAY environment</a> variables need to be set as the code will use these variables to acccess the appropriate XRAY databases.</p>

<p>The arguments for running this python executable are summarized below:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usage: bit2fasm.py [-h] [--db-root DB_ROOT] [--bits-file BITS_FILE]
                  [--part PART] [--bitread BITREAD]
                  [--frame_range FRAME_RANGE] [--verbose] [--canonical]
                  bit_file
</code></pre></div></div>

<p>Here is an example on how to run the executable:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python bit2fasm.py &lt;bitfile.bit&gt;
</code></pre></div></div>

<p>There are three functions that are used within this file to perform the bit2fasm functionality and the purpose of these functions will be described below.</p>

<p><strong>main()</strong></p>

<p>This main function primarily manages arguments and uses the Python ArgumentParser. The primary intput is the Xilinx .bin bitstream.</p>

<p><strong>bit_to_bits()</strong></p>

<p>Once all the arguments are parsed, the <code class="language-plaintext highlighter-rouge">bit_to_bits</code> python function is called. This function  parses the Xilinx bitstream and generates a new text-based version of the bitstream. This function actually creates an intermediate file that gets deleted at the end of execution. If you want to see the file that is created, use the <code class="language-plaintext highlighter-rouge">--bitread</code>` option in the command line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python bit2fasm.py --bitread &lt;bitread.txt&gt; &lt;bitfile.bit&gt;
</code></pre></div></div>

<p>This function calles the executable <code class="language-plaintext highlighter-rouge">bitread</code> which is a C program used for parsing Xilinx bitfiles (see <a href="https://github.com/SymbiFlow/prjxray/blob/master/tools/bitread.cc">bitread.cc</a>). The bitread executable is located in the &lt;prjxray/build/tools&gt; directory. It calls this C program within python using the Python subprocess library and the following options:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bitread &lt;part yaml file&gt; &lt;frame range=None&gt; -o &lt;output bits file&gt; -z -y &lt;input Xilnx bitfile&gt;
</code></pre></div></div>

<p>The ‘-z’ option skips zero frames (or freames with all bits cleared) and the ‘-y’ option uses the text “bit” format shown as an example below. Here is a sample from a “bits” file after this step:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bit_00420019_099_21
bit_0042001d_098_13
bit_0042001e_100_09
bit_00420020_099_16
</code></pre></div></div>

<h4 id="bits_to_fasm">bits_to_fasm</h4>

<p>After creating a ‘bits’ file, the ‘bits_to_fasm’ function is called. This function directs the main work of dissasembly. The function performs the following steps:</p>
<ul>
  <li>Creates the <a href="#database">Database</a> object</li>
  <li>Creates the <a href="#grid">Grid</a> object (by calling db.grid)</li>
  <li>Create <a href="#fasmdisassembler">FasmDisassembler</a> object</li>
</ul>

<p>After creating these objects, a <a href="#bits-file">Bits</a> is read and parsed using the <code class="language-plaintext highlighter-rouge">load_bitdata</code> in the <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/bitstream.py">bitstream.py</a> file. The result is a dictionary (called <code class="language-plaintext highlighter-rouge">bitdata</code>) between a frame_Address and two sets. The first set are the word columns that have any bits set in the bitstrea and the second set are the bit indicies within the frame (not the word). The bit index references a specific bit within a frame and not within the word.</p>

<p>Next, the <a href="#find_features_in_bitstream">find_features_in_bitstream</a> function is called in FasmDisassembler.</p>

<p><strong>HERE</strong></p>

<h3 id="find_features_in_bitstream">find_features_in_bitstream</h3>

<p>This is is the FasmDisassembler object.</p>

<p>The input to this function is a “bitdata” dictionary (see <a href="#bits_to_fasm">bits_to_fasm</a>) that contains bits we want to find features for. The key is a frame address and the two values are arrays: value[0] is a set of words and value[1] is a set of bits within the word. value[i] forms a unique pair of word and bit indicating a specific bit within a frame address. The algorithm works as follows:</p>

<ul>
  <li>Iterate over all frames (keys) in the bitdata dictionary
    <ul>
      <li>Using the <a href="#segmentmap">SegmentMap</a>, iterate over all <a href="#bitsinfo">BitsInfo</a> objects from the device that reference the given frame.
        <ul>
          <li>Iterate over the range of words in the given device BitsInfo object. If any of the words in the features bitdata[frame][0] fall within this range of the device info, continue. Otherwise continue iterating (i.e., the given BitsInfo object doesn’t relate to any of the bits in the bitdata so skip)
            <ul>
              <li>Call <a href="#find_features_in_tile">find_features_in_tile</a>.Iterate over all fasm_line objects obtained from calling the</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="find_features_in_tile">find_features_in_tile</h3>

<p>Input:</p>
<ul>
  <li>tile: Tile we are looking at</li>
  <li>block_type: The block type we are looking at</li>
  <li>bits: BitsInfo object from the SegmentTree that matched against the bitdata.</li>
  <li>solved_bitdata</li>
  <li>bitdata: This is the dictionary passed into the find_features_in_bitstream that contains all of the bits we seek to find</li>
  <li>verbose=False</li>
</ul>

<h3 id="match_bitdata">match_bitdata</h3>

<p>In tile_segbits.py</p>

<h3 id="database">Database</h3>

<p>The Database object is a container that contains information about the database files. It doesn’t actually parse all of the data but rather combines all of the filenames used in the database into a single object so the data can be easily accessed later. This python class is defined in the <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/db.py">db.py</a> file.</p>

<p>There are a lot of variables in the Database object but only a few of them are set in the constructor. The others are set on demand when member functions are called. The constructor iterates through all of the files in the corresponding Database directory and creates an object organizing them. The following variables are set in the constructor:</p>
<ul>
  <li>db_root</li>
  <li>part</li>
  <li>tile_types (a dictionary between a text tile type in upper case and a <a href="#tiledbs">TileDbs</a> object)</li>
  <li>site_types (a dictionary between text site name and the corresponding filename)</li>
  <li>required_features (a dictionary between the part name and a set of features)</li>
</ul>

<p>The following variables are set as methods are called to access more information about the database:</p>
<ul>
  <li>tile_segbits: a dictionary with a key of the tilename and value of</li>
</ul>

<h3 id="tiledbs">TileDbs</h3>

<p>A namedtuple (TileDbs) that encapsulate all of the database filenames associated with a specific tile type. It contains the following fields:</p>
<ul>
  <li>segbits: filename of segbits file</li>
  <li>block_ram_segbits: filename of blockram segbits file</li>
  <li>ppips: filename of ppips file</li>
  <li>mask: filename of maskfile</li>
  <li>tile_type: tile_type string (taken from the tile_type_<name>.json filename)</name></li>
</ul>

<h3 id="grid">Grid</h3>

<p>A python class object that represents the tilegrid for a given part. This python class is defined in the <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/grid.py">grid.py</a> file.</p>

<p>This class is created by first creating a Python json object from the corresponding tilegrid.json file (self.tilegrid). It manages a set of <a href="#gridinfo">GridInfo</a> objects for the device.</p>
<ul>
  <li>tilegrid: json object</li>
  <li>loc: a dictionary between a “grid_loc” object and a tile name (to go from coordinate to tile)</li>
  <li>tileinfo: a dictionary where the key is the tile name and the value is GridInfo object</li>
</ul>

<h3 id="gridloc">GridLoc</h3>

<p>Defined in <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/grid_types.py">grid_types.py</a> file. A named tuple with fields:</p>
<ul>
  <li><strong>grid_x</strong></li>
  <li><strong>grid_y</strong></li>
</ul>

<h3 id="gridinfo">GridInfo</h3>

<p>Defined in <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/grid_types.py">grid_types.py</a> file. A named tuple with fields:</p>
<ul>
  <li><strong>bits</strong>: A dictionary between a segment_type (block type) and a <a href="#bits">Bits</a> object.</li>
  <li><strong>sites</strong>:</li>
  <li><strong>prohibited_sites</strong></li>
  <li><strong>tile_type</strong></li>
  <li><strong>pin_functions</strong></li>
  <li><strong>clock_region</strong></li>
</ul>

<h2 id="bits">Bits</h2>

<p>Defined in <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/grid_types.py">grid_types.py</a> file. A named tuple that stores the “bit” information within a tile .json using the following fields:</p>
<ul>
  <li><strong>base_address</strong></li>
  <li><strong>frames</strong></li>
  <li><strong>offset</strong></li>
  <li><strong>words</strong></li>
  <li><strong>alias</strong></li>
</ul>

<h2 id="segmentmap">SegmentMap</h2>

<p>Defined in <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/segment_map.py">segment_map.py</a> file. A python class that contains a Python “IntervalTree” object. The purpose of this class is to facilitate lookup of BitsInfo objects based on the base address.</p>

<p>The object is constructed by iterating over all of the tiles in the Grid object and creating a <a href="#bitsinfo">BitsInfo</a> object for each tile/block_type pair. An Interval is added to the IntervalTree with the ‘begin’ being the base address, the ‘end’ is the base address + # frames (not #frames - 1). The data in the interval is the corresponding <a href="#bitsinfo">BitsInfo</a> object.</p>

<h3 id="bitsinfo">BitsInfo</h3>

<p>Defined in <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/grid_types.py">grid_types.py</a> file. A named tuple that is used as the data object within an interval of the <a href="#segmentmap">SegmentMap</a> object. This object associates a block_type, tile, and <a href="#bits">Bits</a> object together. The fields are:</p>
<ul>
  <li><strong>block_type</strong>: String block type</li>
  <li><strong>tile</strong>: Tile name</li>
  <li><strong>bits</strong>: The <a href="#bits">Bits</a> object associated with this block type in the tile</li>
</ul>

<h3 id="fasmdisassembler">FasmDisassembler</h3>

<p>The FasmDisassembler object is key for the bitstream feature extraction. This python class is defined in the <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/fasm_disassembler.py">fasm_disassembler.py</a> file. The purpose of the FasmDisassembler constructor is to create a number of important objects used in the disassembly process. The following three objects are created in the constructor:</p>

<ul>
  <li><a href="#database">Bitstream Database</a></li>
  <li><a href="#grid">Grid</a></li>
  <li><a href="#segmentmap">SegmentMap</a></li>
</ul>

<h3 id="tilesegbits">TileSegbits</h3>

<p>This python class is defined in the file <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/tile_segbits.py">tile_segbits.py</a>. Objects of this class are created upon demand through the Grid.get_tile_segbits_at_tilename(tile_name) function. This object is owned by the ‘Database’ object (although accessed by the Grid object using the Database object).</p>

<p>Variables within the class:</p>
<ul>
  <li>segbits: A dictionary with key the name of the resource (CLBM_L…..) and the value is a set of <a href="#bit">Bit</a> objects.</li>
  <li>ppips</li>
  <li>feature_addresses</li>
</ul>

<h3 id="bit">Bit</h3>

<p>This is a named tuple defined in the <a href="https://github.com/SymbiFlow/prjxray/blob/master/prjxray/tile_segbits.py">tile_segbits.py</a> file. The fields are:</p>
<ul>
  <li>word_column</li>
  <li>word_bit</li>
  <li>isset
The represent strings such as “29_14”</li>
</ul>

<h2 id="data-structures">Data Structures</h2>

<p>This section summarizes the data structures and file formats used within the bit2fasm flow.</p>

<h3 id="xilinx-bin-bitstream">Xilinx .bin Bitstream</h3>
<p>This is the bitstream created by the Vivado tools and in the .bin format. It is binary, has a header, and is made up of command sequences.</p>

<h3 id="bits-file">Bits file</h3>
<p>A textfile representation of the bitstream that is generated from the <code class="language-plaintext highlighter-rouge">bitread</code> executable using the ‘-y’ and ‘-z’ options. Here is a sample from a ‘bits’ file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bit_00420019_099_21
bit_0042001d_098_13
bit_0042001e_100_09
bit_00420020_099_16
</code></pre></div></div>

<h3 id="tilegridjson-file">tilegrid.json file</h3>

<p>Devices of the same family share the same database directory but each devices has its own unique “tilegrid.json” fil. This file represents the grid of tiles used to make the unique part. The tile grid is represented in the .json format and is essentially a list of “tiles”. Each tile is represented as follows:</p>

<ul>
  <li><strong>tile name:</strong> A unique text string that represents a unique tile. The tile name has X &amp; Y coordinates embedded within them. The coordiante system of these coordinates seems to be some logical representation and does not refer to actual physical locations (example: BRAM_INT_INTERFACE_L_X6Y2)
    <ul>
      <li><strong>tile type</strong>: a string that indicates tile type. There should be a corresponding file named “tile_type_<type>.json" in the database directory.</type></li>
      <li><strong>grid_x:</strong> numerical grid x position (not the same coordinate system as the tile name)</li>
      <li><strong>grid_y</strong>: numerical grid y position=</li>
      <li><strong>pin_functions</strong>:</li>
      <li><strong>prohibited_sites</strong>:</li>
      <li><strong>sites</strong>: contains a list of unique sites within the tile. Each site is specified by a key/value pair where “key” is the unique site name and the “value” is the site type.</li>
      <li><strong>bits</strong>: bitstream information (can be empty). Contains a list of named objects with corresponding bitstream info. Multiple named objects may exist.
        <ul>
          <li><strong>name</strong>: A Block type name that has bits
            <ul>
              <li><strong>alias</strong>:</li>
              <li><strong>baseaddr</strong>: The base frame address in the bitstream of the object.</li>
              <li><strong>frames</strong>: The number of sequential frames in the current column that have bitstream information for this resource.</li>
              <li><strong>offset</strong>: The number of words in the frame in which bits for this resource starts.</li>
              <li><strong>words</strong>: The number of sequential words in the frame.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>clock_region</strong>: String indicating which “clock region” the tile belongs to. This string is in the form “X<X loc="">Y<Y loc="">". Clock region
               coordinate system.</Y></X></li>
    </ul>
  </li>
</ul>

<h2 id="project-xray-environment-variables">Project XRAY Environment Variables</h2>


  </div>
</article>

      </div>
    </div>
    <!-- /#page-content-wrapper -->

  </div>
  <!-- /#wrapper -->

  <!-- Bootstrap core JavaScript -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
<script src=/ComputingBootCamp/js/jquery.visible.min.js></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
<script src=/ComputingBootCamp/js/js.cookie-2.2.1.min.js></script>



<!-- Menu Toggle Script -->
<script>
    $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });

    var prevVisible = $('#page-title').visible();

    $(window).scroll(function () {
        currentVisible = $('#page-title').visible()
        if (prevVisible && !currentVisible) {
            console.log("Do something!");
            $("#page-title-bar").html($('#page-title').text());
        }

        if (!prevVisible && currentVisible) {
            $("#page-title-bar").html("")
        }

        prevVisible = currentVisible;
    });

</script>


<!-- Sidebar memory script -->
<script type="module">

    $(document).ready(function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown) {
            // $("#collapsesetup").collapse("show");
            return;
        }
        shown = JSON.parse(shown);

        shown.forEach(function (item, index) {
            $("#" + item).addClass('no-collapse-animation')
            $("#" + item).collapse("show");
            $("#" + item).removeClass('no-collapse-animation')
        });
    });

    

    // When a group is expanded, save it to the 'expandedSidebars' cookie.
    $("#collapsesetup").on('shown.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            shown = "[]";
        shown = JSON.parse(shown);
        shown.push("collapsesetup");
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    // When a group is hidden, remove it from the 'exapndedSidebars' cookie
    $("#collapsesetup").on('hidden.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            return;
        shown = JSON.parse(shown);

        shown = shown.filter(function (value, index, arr) {
            return value != "collapsesetup"
        });
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    

    // When a group is expanded, save it to the 'expandedSidebars' cookie.
    $("#collapsedevelopment").on('shown.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            shown = "[]";
        shown = JSON.parse(shown);
        shown.push("collapsedevelopment");
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    // When a group is hidden, remove it from the 'exapndedSidebars' cookie
    $("#collapsedevelopment").on('hidden.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            return;
        shown = JSON.parse(shown);

        shown = shown.filter(function (value, index, arr) {
            return value != "collapsedevelopment"
        });
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    

    // When a group is expanded, save it to the 'expandedSidebars' cookie.
    $("#collapsefpga_commercial").on('shown.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            shown = "[]";
        shown = JSON.parse(shown);
        shown.push("collapsefpga_commercial");
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    // When a group is hidden, remove it from the 'exapndedSidebars' cookie
    $("#collapsefpga_commercial").on('hidden.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            return;
        shown = JSON.parse(shown);

        shown = shown.filter(function (value, index, arr) {
            return value != "collapsefpga_commercial"
        });
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    

    // When a group is expanded, save it to the 'expandedSidebars' cookie.
    $("#collapsefpga_opensource").on('shown.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            shown = "[]";
        shown = JSON.parse(shown);
        shown.push("collapsefpga_opensource");
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    // When a group is hidden, remove it from the 'exapndedSidebars' cookie
    $("#collapsefpga_opensource").on('hidden.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            return;
        shown = JSON.parse(shown);

        shown = shown.filter(function (value, index, arr) {
            return value != "collapsefpga_opensource"
        });
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    

    // When a group is expanded, save it to the 'expandedSidebars' cookie.
    $("#collapserobotics").on('shown.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            shown = "[]";
        shown = JSON.parse(shown);
        shown.push("collapserobotics");
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    // When a group is hidden, remove it from the 'exapndedSidebars' cookie
    $("#collapserobotics").on('hidden.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            return;
        shown = JSON.parse(shown);

        shown = shown.filter(function (value, index, arr) {
            return value != "collapserobotics"
        });
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    

    // When a group is expanded, save it to the 'expandedSidebars' cookie.
    $("#collapseresources").on('shown.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            shown = "[]";
        shown = JSON.parse(shown);
        shown.push("collapseresources");
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    // When a group is hidden, remove it from the 'exapndedSidebars' cookie
    $("#collapseresources").on('hidden.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            return;
        shown = JSON.parse(shown);

        shown = shown.filter(function (value, index, arr) {
            return value != "collapseresources"
        });
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    

    // When a group is expanded, save it to the 'expandedSidebars' cookie.
    $("#collapsearchive").on('shown.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            shown = "[]";
        shown = JSON.parse(shown);
        shown.push("collapsearchive");
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    // When a group is hidden, remove it from the 'exapndedSidebars' cookie
    $("#collapsearchive").on('hidden.bs.collapse', function () {
        var shown = Cookies.get('expandedSidebars');
        if (!shown)
            return;
        shown = JSON.parse(shown);

        shown = shown.filter(function (value, index, arr) {
            return value != "collapsearchive"
        });
        Cookies.set('expandedSidebars', JSON.stringify(shown));
    });

    
</script>

</body>

</html>